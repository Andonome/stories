\makeindex[name=spells,title={Spell Summaries},columns=2]

\newcommand\namesOfHumans{
  \begin{boxtable}[c|YY]
  \Hu & \textbf{Prefix} & \textbf{Suffix} \\\hline
  \ifodd\value{r3}
    \ifodd\value{r4}
      \dicef{1} & Grit    & --itch \\
    \else
      \dicef{1} & Rank    & --vore \\
    \fi
  \else
    \dicef{1} & Scour    & --snag   \\
  \fi
  \ifodd\value{r3}
    \ifodd\value{temperature}
      \ifodd\value{r12}
        \dicef{2} & Steer  & --peel  \\
      \else
        \dicef{2} & Mush  & --groat  \\
      \fi
      \dicef{3} & Stoat  & --fen  \\
    \else
      \dicef{2} & Court  & --nash  \\
      \dicef{3} & Glum  & --nail  \\
    \fi
    \ifodd\value{r3}
      \dicef{4} & Flic   & --rash   \\
    \else
      \dicef{3} & Dug   & --flay  \\
    \fi
  \else
    \ifodd\value{temperature}
      \dicef{3} & Nark   & --boak   \\
    \else
      \dicef{3} & Nettle   & --broil  \\
    \fi
    \dicef{4} & Slate   & --pike  \\
  \fi
  \ifodd\value{season}
    \ifodd\value{r4}
      \dicef{5} & Gourse  &  --filch \\
    \else
      \dicef{5} & Cinder  &  --snatch \\
    \fi
  \else
    \ifodd\value{r4}
      \dicef{5} & Soot   & --flea  \\
    \else
      \dicef{5} & Moc    & --fray  \\
    \fi
  \fi
  \ifodd\value{r2}
    \dicef{6} &  Keel   & --drag  \\
  \else
    \dicef{6} & Gout    & --blathe  \\
  \fi
  \end{boxtable}
}

\newcommand\poshNames{
  \begin{nametable}[c|Y|Y]{Aristocratic Names}
    \textbf{Roll} & \textbf{Name} & \textbf{Name} \\\hline
    \ifodd\value{r3}
      \dicef{1} & Grawlix & Vex \\
      \dicef{2} & Topaz & Cuspadore \\
      \dicef{3} & Coreolis & Carnyx \\
      \dicef{4} & Caligin & Maledict \\
    \else
      \dicef{1} & Fractious & Ethel \\
      \dicef{2} & Calyx & Fextol \\
      \dicef{3} & Seance & Tepal \\
      \dicef{4} & Voynich & Sefal \\
    \fi
    \dicef{5} & Artix & Aspid \\
    \dicef{6} & Elegiac & Wardrid \\
  \end{nametable}
}

% for CS callout boxes

\newcommand\commentary[3]{
  \ifstrempty{#3}{}{\stepcounter{track}}
  \node[text=white, overlay, rectangle callout, callout relative pointer={(#2)}, fill=black,] (randomNode) at (#1) [text width=4cm]{#3};
}

\newcommand\showConcept[6]{
  \filbreak
  \setcounter{knacks}{0}
  \randomdozen
  \item
  \textbf{#1:} % Attribute
  \underline{%
  \textit{#2!}% Concept
  }
  #3% Description
  \begin{itemize}
    \item[\textbf{Code:}] #4

    \item[\textbf{Stats:}] #5

    \item[\textbf{Stuff:}] Begin play with #6

    \bigLine
  \end{itemize}
  \filbreak
}

\newcommand{\racechart}{

\begin{nametable}[clX]{Race}
  
  \textbf{Roll} & \textbf{Race} & \textbf{Adjustments} \\\hline

  2-3 & Gnome & \mbox{+1 Intelligence, +1 Dexterity,} \mbox{Strength -2, Speed -1} \\

  4-5 & Dwarf & +1 Dexterity, -1 Speed \\

  6-8 & Human & +1 Strength, -1 Wits \\

  9-10 & Elf & +1 Wits, -1 Strength \\

  11-12 & Gnoll & \mbox{+1 Strength, +1 Speed,} \mbox{-1 Intelligence, -2 Charisma} \\

\end{nametable}
}

\newcommand\attributeChart{
  \begin{boxtable}[YYX]

    \textbf{Result} & \textbf{Bonus} & \textbf{Meaning} \\
    \hline

    2 & -3 & Pathetic \\

    3 & -2 & Useless \\

    4-5 & -1 & Weak \\

    6-8 & 0 & Normal \\

    9-10 & +1 & Exceptional \\

    11 & +2 & Excellent \\

    12 & +3 & Peak \\

  \end{boxtable}
}

\newcommand\XPchart{
  \index{Traits!Purchasing}
  \begin{wideTable}[XYYYY]{\Glsfmttext{xp} Costs}
    \textbf{Level} &  \textbf{Attributes}  &  \textbf{Skill}  & \textbf{Martial Skills}  & \textbf{Knacks} \\
    \hline
    <1             &         5             &      ---         &       ---                &        ---       \\
    1st            &         10            &       5          &        10                &         5        \\
    2nd            &         15            &       10         &        20                &        10        \\
    3rd            &         25            &       20         &        40                &        15        \\
    4th            &         45            &                  &                          &        20        \\
    \hline
    \textit{Total} &         95            &       35         &        70                &     50 (for 4)   \\

  \end{wideTable}
}


\newcommand\exampleRandomCharacter{
  \renewcommand\csComments{
      \setcounter{track}{0}

      \commentary{[xshift=-10em,yshift=-2em]TCBPOSTER@title.north}{-2em,-0.5em}{{\LARGE \arabic{track}: }Roll a random race (\vpageref{raceRoll}), then use that to select a name (\vpageref{randomNames}).}
      \commentary{[xshift=0em,yshift=-1em]TCBPOSTER@attributes.north}{0em,0em}{{\LARGE \arabic{track}: }Roll to determine each of your Attributes, then apply the racial modifier.}
      \commentary{[xshift=0em,yshift=-1em]TCBPOSTER@skills.north east}{-10em,3em}{}
      \commentary{[xshift=0em,yshift=-1em]TCBPOSTER@skills.north east}{-18em,-33em}{}
      \commentary{[xshift=0em,yshift=-1em]TCBPOSTER@skills.north east}{-4em,-11em}{{\LARGE \arabic{track}: }Your lowest and highest Attributes determine your Concept and Code (see \nameref{enlistment}, \vpageref{enlistment}).  Write down the Skills, equipment, and weapons.}
      \commentary{[xshift=3em,yshift=-7em]TCBPOSTER@gumption}{2em,23em}{}
      \commentary{[xshift=3em,yshift=-7em]TCBPOSTER@gumption}{-2em,8em}{{\LARGE \arabic{track}: }Place coins in the circles to keep track of the current scores, then fill in the derived score for combat.}
  }
  \setcounter{Strength}{0}
  \setcounter{Dexterity}{-1}
  \setcounter{Speed}{0}
  \setcounter{Intelligence}{1}
  \setcounter{Wits}{0}
  \setcounter{Charisma}{1}

  \renewcommand\concept{Loner}
  \renewcommand\race{Human}
  \renewcommand\rank{Fodder}
  \renewcommand\name{Proskuff}
  \renewcommand\code{Conqueror}

  \setcounter{Academics}{2}
  \setcounter{Athletics}{0}
  \setcounter{Caving}{0}
  \setcounter{Crafts}{0}
  \setcounter{Deceit}{0}
  \setcounter{Empathy}{0}
  \setcounter{Medicine}{0}
  \setcounter{Performance}{0}
  \setcounter{Larceny}{0}
  \setcounter{Seafaring}{0}
  \setcounter{Stealth}{0}
  \setcounter{Tactics}{1}
  \setcounter{Vigilance}{0}
  \setcounter{Wyldcrafting}{0}

  \setcounter{Air}{2}
  \setcounter{Combat}{0}
  \setcounter{Projectiles}{0}

  \setcounter{fp}{5}

  \renewcommand\characterWeapon{\shortsword}
  \renewcommand\characterArmour{}
  \renewcommand\characterEquipment{Bag of flour, bag of chalk, dagger, unopened letter}
  \setcounter{gold}{0}

  \settoggle{examplecharacter}{true}
  \settoggle{genExamples}{true}
  \input{config/CS.tex}
  \settoggle{genExamples}{false}
  \settoggle{examplecharacter}{false}
  \renewcommand\csComments{}
  \clearpage
}

\newlength{\magicCircle}
\setlength{\magicCircle}{.32\textwidth}
\newlength{\sphereBack}
\setlength{\sphereBack}{18pt}

\newcommand\speltogram{
  \setcounter{track}{161}
  \begin{tikzpicture}[very thick]

    \foreach \x in {1,...,5} {
      \node (\x) at (\arabic{track}:\magicCircle) {};
      \addtocounter{track}{72}
    }

    \foreach \x in {1,...,5} {
      \setcounter{enc}{\x}
      \addtocounter{enc}{2}
      \ifnum\value{enc}>5
        \addtocounter{enc}{-5}
      \fi
      \draw[fill=\pageSideColor] (\x) -- (\arabic{enc});
    }

    \foreach \x in {1,...,5} {
      \draw[fill=\pageSideColor] (\x) circle(\sphereBack){};
      \addtocounter{track}{72}
    }

    \addtocounter{track}{36}
    \foreach \x in {6,...,10} {
      \node (\x) at (\arabic{track}:.38\magicCircle) {};
      \draw[fill=\pageSideColor] (\x) circle(\sphereBack){};
      \addtocounter{track}{72}
    }

    \node (X) at  (6) {\Large\outline{\titleFont{Earth}}};
    \node (X) at  (7) {\Large\outline{\titleFont{Water}}};
    \node (X) at  (8) {\Large\outline{\titleFont{Fate}}};
    \node (X) at  (9) {\Large\outline{\titleFont{Air}}};
    \node (X) at (10) {\Large\outline{\titleFont{Fire}}};
    \node (X) at  (1) {\huge\outline{\titleFont{Force}}};
    \node (X) at  (2) {\huge\outline{\titleFont{Life}}};
    \node (X) at  (3) {\huge\outline{\titleFont{Mind}}};
    \node (X) at  (4) {\huge\outline{\titleFont{Death}}};
    \node (X) at  (5) {\huge\outline{\titleFont{Light}}};
  \end{tikzpicture}
}
